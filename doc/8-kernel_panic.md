# kernel panic

## kernel panicとは

KPと略されることも
カーネルが続行不能な（致命的な）エラーに遭遇したときに発生し、安全に復旧することができなくなった状態の際にとる安全対策のこと。

## kernel panicの実装

```c
#define PANIC(fmt, ...)                                                         \
    do {                                                                        \
        printf("PANIC: %s:%d: " fmt "\n", __FILE__, __LINE__, ##__VA_ARGS__);   \
        while (1) {}                                                            \
    } while (0);
```

`do-while`は一度のみ実行する（マクロ定義で複数行にわたるときに使用する方法）
今回はエラー文を表示し、`while(1) {}`の分限ループに入り処理を停止する。
`##__VA_ARGS__`（可変長引数を受け取るマクロ。可変長引数が空のときに`##`で直前の`,`を消去する。）
